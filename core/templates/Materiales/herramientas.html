{% extends 'base.html' %}
{% load static %}
{% block css %}
<!-- Aquí pueden ir tus estilos CSS -->
{% endblock %}
{% block contenido %}



<section class="product-details py-5">
    <div class="container" data-rel="some-rel-data">
        <div class="row">
            <div class="col-lg-6 col-md-6">
                <div class="product__details__pic">
                    <div id="productDetailsSlider" class="carousel slide" data-ride="carousel">
                        <div class="carousel-inner">
                            <div class="carousel-item active" style="max-height: 390px; max-width: 300px;">
                                <img class="d-block w-100" id="product-image"
                                    src="{% static 'img/producto/herramientas.png' %}" alt="Pintura">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 col-md-6">
                <div class="product__details__text">
                    <h3 class="right-content">Pack de herramientas</h3>
                    <div class="product__details__rating mb-3">
                        <span class="text-warning">
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star-half-o"></i>
                        </span>
                        <span>(18 reviews)</span>
                    </div>
                    <div class="product__details__price h4 price">CLP 120000</div>
                    <p>Mauris blandit aliquet elit, eget tincidunt nibh pulvinar a. Vestibulum ac diam sit amet quam
                        vehicula elementum sed sit amet dui. Sed porttitor lectus nibh. Vestibulum ac diam sit amet quam
                        vehicula elementum sed sit amet dui. Proin eget tortor risus.</p>
                    <div class="product__details__quantity mb-3">
                        <div class="quantity">
                            <div class="input-group">
                                <input type="number" class="form-control" name="quantity" value="1" min="1">
                            </div>
                        </div>
                    </div>
                    <a href="{% url 'cart' %}" id="add-to-cart-button" class="btn btn-primary mr-2">ADD TO CART</a>
                </div>
            </div>
            <div class="col-lg-12">
                <div class="product__details__tab mt-5">
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" data-toggle="tab" href="#tabs-1" role="tab"
                                aria-selected="true">Description</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#tabs-2" role="tab"
                                aria-selected="false">Information</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#tabs-3" role="tab"
                                aria-selected="false">Reviews <span>(1)</span></a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane fade show active" id="tabs-1" role="tabpanel">
                            <div class="product__details__tab__desc mt-3">
                                <h6>Product Information</h6>
                                <p>Vestibulum ac diam sit amet quam vehicula elementum sed sit amet dui. Pellentesque in
                                    ipsum id orci porta dapibus. Proin eget tortor risus. Vivamus suscipit tortor eget
                                    felis porttitor volutpat. Vestibulum ac diam sit amet quam vehicula elementum sed
                                    sit amet dui. Donec rutrum congue leo eget malesuada. Vivamus suscipit tortor eget
                                    felis porttitor volutpat. Curabitur arcu erat, accumsan id imperdiet et, porttitor
                                    at sem. Praesent sapien massa, convallis a pellentesque nec, egestas non nisi.
                                    Vestibulum ac diam sit amet quam vehicula elementum sed sit amet dui. Vestibulum
                                    ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Donec
                                    velit neque, auctor sit amet aliquam vel, ullamcorper sit amet ligula. Proin eget
                                    tortor risus.</p>
                                <p>Praesent sapien massa, convallis a pellentesque nec, egestas non nisi. Lorem ipsum
                                    dolor sit amet, consectetur adipiscing elit. Mauris blandit aliquet elit, eget
                                    tincidunt nibh pulvinar a. Cras ultricies ligula sed magna dictum porta. Cras
                                    ultricies ligula sed magna dictum porta. Sed porttitor lectus nibh. Mauris blandit
                                    aliquet elit, eget tincidunt nibh pulvinar a. Vestibulum ac diam sit amet quam
                                    vehicula elementum sed sit amet dui. Sed porttitor lectus nibh. Vestibulum ac diam
                                    sit amet quam vehicula elementum sed sit amet dui. Proin eget tortor risus.</p>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="tabs-2" role="tabpanel">
                            <div class="product__details__tab__desc mt-3">
                                <h6>Product Information</h6>
                                <p>Vestibulum ac diam sit amet quam vehicula elementum sed sit amet dui. Pellentesque in
                                    ipsum id orci porta dapibus. Proin eget tortor risus. Vivamus suscipit tortor eget
                                    felis porttitor volutpat. Vestibulum ac diam sit amet quam vehicula elementum sed
                                    sit amet dui. Donec rutrum congue leo eget malesuada. Vivamus suscipit tortor eget
                                    felis porttitor volutpat. Curabitur arcu erat, accumsan id imperdiet et, porttitor
                                    at sem. Praesent sapien massa, convallis a pellentesque nec, egestas non nisi.
                                    Vestibulum ac diam sit amet quam vehicula elementum sed sit amet dui. Vestibulum
                                    ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Donec
                                    velit neque, auctor sit amet aliquam vel, ullamcorper sit amet ligula. Proin eget
                                    tortor risus.</p>
                                <p>Praesent sapien massa, convallis a pellentesque nec, egestas non nisi. Lorem ipsum
                                    dolor sit amet, consectetur adipiscing elit. Mauris blandit aliquet elit, eget
                                    tincidunt nibh pulvinar a. Cras ultricies ligula sed magna dictum porta. Cras
                                    ultricies ligula sed magna dictum porta. Sed porttitor lectus nibh. Mauris blandit
                                    aliquet elit, eget tincidunt nibh pulvinar a.</p>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="tabs-3" role="tabpanel">
                            <div class="product__details__tab__desc mt-3">
                                <h6>Product Information</h6>
                                <p>Vestibulum ac diam sit amet quam vehicula elementum sed sit amet dui. Pellentesque in
                                    ipsum id orci porta dapibus. Proin eget tortor risus. Vivamus suscipit tortor eget
                                    felis porttitor volutpat. Vestibulum ac diam sit amet quam vehicula elementum sed
                                    sit amet dui. Donec rutrum congue leo eget malesuada. Vivamus suscipit tortor eget
                                    felis porttitor volutpat. Curabitur arcu erat, accumsan id imperdiet et, porttitor
                                    at sem. Praesent sapien massa, convallis a pellentesque nec, egestas non nisi.
                                    Vestibulum ac diam sit amet quam vehicula elementum sed sit amet dui. Vestibulum
                                    ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Donec
                                    velit neque, auctor sit amet aliquam vel, ullamcorper sit amet ligula. Proin eget
                                    tortor risus.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Bootstrap CSS and JS -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const addToCartButton = document.getElementById('add-to-cart-button');
    addToCartButton.addEventListener('click', function(event) {
        event.preventDefault();
        
        // Recolectar datos del producto
        const productImage = document.getElementById('product-image').src.split('/').pop();
        const productName = document.querySelector('.product__details__text h3').textContent;
        const productPrice = document.querySelector('.product__details__price').textContent;
        const productQuantity = document.querySelector('input[name="quantity"]').value;
        const productRel = document.querySelector('.container').getAttribute('data-rel');
        
        // Crear objeto del producto
        const product = {
            image: productImage,
            name: productName,
            price: productPrice,
            quantity: productQuantity,
            rel: productRel
        };
        
        // Obtener el carrito del localStorage
        let cart = JSON.parse(localStorage.getItem('cart')) || {};
        
        // Añadir o actualizar el producto en el carrito
        if (cart[productName]) {
            cart[productName].quantity = parseInt(cart[productName].quantity) + parseInt(productQuantity);
        } else {
            cart[productName] = product;
        }
        
        // Guardar el carrito actualizado en el localStorage
        localStorage.setItem('cart', JSON.stringify(cart));
        
        // Redirigir al carrito de compras
        window.location.href = addToCartButton.href;
    });
  });
</script>

{% endblock %}

{% block js %}

{% endblock %}